require 'gitit'

module Gitit
    
  # ---------------------------------------------------------------------------
  # ---------------------------------------------------------------------------
  class Repo
    attr_reader :location;
  
    # -------------------------------------------------------------------------
    # -------------------------------------------------------------------------
    def initialize(location)
      raise 'Invalid path specified' unless File.directory? location
      @location = location
    end
  
    # -------------------------------------------------------------------------
    # -------------------------------------------------------------------------
    def valid?
      `(cd #{@location} && git rev-parse --git-dir >/dev/null 2>&1)`
      $?.exitstatus == 0
    end
  
    # -------------------------------------------------------------------------
    # -------------------------------------------------------------------------
    def init
      raise 'already a git repo' if valid?
      `(cd #{@location} && git init)`
    end
  end
    
end
